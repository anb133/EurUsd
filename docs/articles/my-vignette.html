<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Demo of <code>eur</code> and <code>eurusds</code> functions • EurUsd</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js" integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha256-916EbMg70RQy9LHiGkXzG8hSg9EdNy97GazNG/aiY1w=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha256-U5ZEeKfGNOja007MMD3YBI0A3OSZOQbeG6z2f2Y0hu8=" crossorigin="anonymous"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css" integrity="sha256-eZrrJcwDc/3uDhsdt61sL2oOBY362qM3lon1gyExkL0=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.4/clipboard.min.js" integrity="sha256-FiZwavyI2V6+EXO1U+xzLG3IKldpiTFf3153ea9zikQ=" crossorigin="anonymous"></script><!-- sticky kit --><script src="https://cdnjs.cloudflare.com/ajax/libs/sticky-kit/1.1.3/sticky-kit.min.js" integrity="sha256-c4Rlo1ZozqTPE2RLuvbusY3+SU1pQaJC0TjuhygMipw=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="Demo of &lt;code&gt;eur&lt;/code&gt; and &lt;code&gt;eurusds&lt;/code&gt; functions">
<meta property="og:description" content="">
<meta name="twitter:card" content="summary">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">EurUsd</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.1.0</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../index.html">
    <span class="fa fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/my-vignette.html">Demo of `eur` and `eurusds` functions</a>
    </li>
  </ul>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right"></ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      
      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1>Demo of <code>eur</code> and <code>eurusds</code> functions</h1>
                        <h4 class="author">Anna Barbayeva</h4>
            
            <h4 class="date">2019-05-29</h4>
      
      
      <div class="hidden name"><code>my-vignette.Rmd</code></div>

    </div>

    
    
<p><em>The goal of this vignette is to demonstrate how <code>eur</code> and <code>eurusds</code> functions can be applied by using them in Bitocoin report generation.</em></p>
<div id="load-all-packages" class="section level4">
<h4 class="hasAnchor">
<a href="#load-all-packages" class="anchor"></a>Load all packages</h4>
<div class="sourceCode" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb1-1" title="1"><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/library">library</a></span>(EurUsd)</a>
<a class="sourceLine" id="cb1-2" title="2"><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/library">library</a></span>(binancer)</a>
<a class="sourceLine" id="cb1-3" title="3"><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/library">library</a></span>(data.table)</a>
<a class="sourceLine" id="cb1-4" title="4"><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/library">library</a></span>(ggplot2)</a>
<a class="sourceLine" id="cb1-5" title="5"><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/library">library</a></span>(scales)</a>
<a class="sourceLine" id="cb1-6" title="6"><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/library">library</a></span>(pander)</a></code></pre></div>
</div>
<div id="fetch-the-daily-volume-of-bitcoins" class="section level3">
<h3 class="hasAnchor">
<a href="#fetch-the-daily-volume-of-bitcoins" class="anchor"></a>1. Fetch the Daily Volume of Bitcoins</h3>
<p>The daily volume and close prices of Bitcoins sold for “USDT” on Binance for the last 45 days can be fetched with the help of <code>binance_klines</code> from the <code>binancer</code> package:</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb2-1" title="1"><span class="co"># Getting data</span></a>
<a class="sourceLine" id="cb2-2" title="2">coin_prices &lt;-<span class="st"> </span><span class="kw">binance_klines</span>(<span class="st">'BTCUSDT'</span>, <span class="dt">interval =</span> <span class="st">'1d'</span>, <span class="dt">limit =</span> <span class="dv">45</span>) </a>
<a class="sourceLine" id="cb2-3" title="3"></a>
<a class="sourceLine" id="cb2-4" title="4"><span class="co"># Keeping only relevant columns</span></a>
<a class="sourceLine" id="cb2-5" title="5">BTC_<span class="dv">45</span>_days &lt;-<span class="st"> </span>coin_prices[, .(<span class="dt">date =</span> <span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/as.Date">as.Date</a></span>(close_time), <span class="dt">btcusd =</span> close, volume)] </a>
<a class="sourceLine" id="cb2-6" title="6"></a>
<a class="sourceLine" id="cb2-7" title="7"><span class="co"># Set Key (for further merge)</span></a>
<a class="sourceLine" id="cb2-8" title="8"><span class="kw">setkey</span>(BTC_<span class="dv">45</span>_days, date)</a></code></pre></div>
</div>
<div id="get-eurusd-exchange-rates" class="section level3">
<h3 class="hasAnchor">
<a href="#get-eurusd-exchange-rates" class="anchor"></a>2. Get EUR/USD exchange rates</h3>
<p>The exchange rates can be fetched with the help of <code>eurusds</code> function for specified dates:</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb3-1" title="1"><span class="co"># Get the first and the last dates for which exchange rates should be fetched</span></a>
<a class="sourceLine" id="cb3-2" title="2">date_from &lt;-<span class="st"> </span><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/Extremes">min</a></span>(BTC_<span class="dv">45</span>_days<span class="op">$</span>date)</a>
<a class="sourceLine" id="cb3-3" title="3">date_to &lt;-<span class="st"> </span><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/Extremes">max</a></span>(BTC_<span class="dv">45</span>_days<span class="op">$</span>date)</a>
<a class="sourceLine" id="cb3-4" title="4"></a>
<a class="sourceLine" id="cb3-5" title="5"><span class="co"># Get the exchange rates</span></a>
<a class="sourceLine" id="cb3-6" title="6">exchange_rates &lt;-<span class="st"> </span><span class="kw"><a href="../reference/eurusds.html">eurusds</a></span>(date_from, date_to)</a>
<a class="sourceLine" id="cb3-7" title="7"></a>
<a class="sourceLine" id="cb3-8" title="8"><span class="co"># Set Key (for further merge)</span></a>
<a class="sourceLine" id="cb3-9" title="9"><span class="kw">setkey</span>(exchange_rates, date)</a></code></pre></div>
</div>
<div id="put-all-information-together" class="section level3">
<h3 class="hasAnchor">
<a href="#put-all-information-together" class="anchor"></a>3. Put all information together</h3>
<p>Merge the tables by date. Note that the Foreign Exchange market is closed on holidays and weekends, therefore for the days with the missing exchange rate the latest rate available would be used.</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb4-1" title="1"><span class="co"># Merge the tables</span></a>
<a class="sourceLine" id="cb4-2" title="2">BTC_<span class="dv">45</span>_days &lt;-<span class="st"> </span>exchange_rates[BTC_<span class="dv">45</span>_days, roll =<span class="st"> </span><span class="ot">TRUE</span>] </a>
<a class="sourceLine" id="cb4-3" title="3"></a>
<a class="sourceLine" id="cb4-4" title="4"><span class="co"># Get the total value ein Euro </span></a>
<a class="sourceLine" id="cb4-5" title="5">BTC_<span class="dv">45</span>_days[, value_eur <span class="op">:</span><span class="er">=</span><span class="st"> </span>btcusd <span class="op">*</span><span class="st"> </span>volume <span class="op">*</span><span class="st"> </span>eurusd] </a>
<a class="sourceLine" id="cb4-6" title="6"></a>
<a class="sourceLine" id="cb4-7" title="7"><span class="co"># Show first entires of the table</span></a>
<a class="sourceLine" id="cb4-8" title="8"><span class="kw">pandoc.table</span>(<span class="kw"><a href="https://www.rdocumentation.org/packages/utils/topics/head">head</a></span>(BTC_<span class="dv">45</span>_days))</a></code></pre></div>
<table class="table">
<colgroup>
<col width="18%">
<col width="12%">
<col width="12%">
<col width="12%">
<col width="16%">
</colgroup>
<thead><tr class="header">
<th align="center">date</th>
<th align="center">eurusd</th>
<th align="center">btcusd</th>
<th align="center">volume</th>
<th align="center">value_eur</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="center">2019-04-15</td>
<td align="center">0.8839</td>
<td align="center">5025</td>
<td align="center">29057</td>
<td align="center">129064735</td>
</tr>
<tr class="even">
<td align="center">2019-04-16</td>
<td align="center">0.8846</td>
<td align="center">5174</td>
<td align="center">24242</td>
<td align="center">110944279</td>
</tr>
<tr class="odd">
<td align="center">2019-04-17</td>
<td align="center">0.8849</td>
<td align="center">5203</td>
<td align="center">23308</td>
<td align="center">107304588</td>
</tr>
<tr class="even">
<td align="center">2019-04-18</td>
<td align="center">0.8889</td>
<td align="center">5258</td>
<td align="center">22619</td>
<td align="center">105726143</td>
</tr>
<tr class="odd">
<td align="center">2019-04-19</td>
<td align="center">0.8889</td>
<td align="center">5259</td>
<td align="center">24611</td>
<td align="center">1.15e+08</td>
</tr>
<tr class="even">
<td align="center">2019-04-20</td>
<td align="center">0.8889</td>
<td align="center">5292</td>
<td align="center">19169</td>
<td align="center">90165944</td>
</tr>
</tbody>
</table>
</div>
<div id="create-a-plot" class="section level3">
<h3 class="hasAnchor">
<a href="#create-a-plot" class="anchor"></a>4. Create a plot</h3>
<p>Now, as all necessary information is fetched, the plot is created. Note the usage of <code>eur</code> function in the last line: it formats numeric values on the Y-axis as Euros.</p>
<div class="sourceCode" id="cb5"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb5-1" title="1"><span class="kw">ggplot</span>(BTC_<span class="dv">45</span>_days, <span class="kw">aes</span>(<span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/as.POSIXlt">as.POSIXct</a></span>(date), value_eur)) <span class="op">+</span><span class="st"> </span></a>
<a class="sourceLine" id="cb5-2" title="2"><span class="st">  </span><span class="kw">geom_line</span>(<span class="kw">aes</span>(<span class="dt">col =</span> value_eur), <span class="dt">size =</span> <span class="dv">2</span>) <span class="op">+</span></a>
<a class="sourceLine" id="cb5-3" title="3"><span class="st">  </span><span class="kw">theme_bw</span>() <span class="op">+</span><span class="st"> </span></a>
<a class="sourceLine" id="cb5-4" title="4"><span class="st">  </span><span class="kw">theme</span>(<span class="dt">axis.text.x =</span> <span class="kw">element_text</span>(<span class="dt">vjust =</span> <span class="fl">0.5</span>), <span class="dt">panel.grid.major =</span> <span class="kw">element_line</span>(<span class="dt">colour =</span> <span class="st">"darkgrey"</span>), </a>
<a class="sourceLine" id="cb5-5" title="5">        <span class="dt">legend.position =</span> <span class="st">'None'</span>) <span class="op">+</span><span class="st"> </span></a>
<a class="sourceLine" id="cb5-6" title="6"><span class="st">    </span><span class="kw">labs</span>(<span class="dt">x =</span> <span class="st">''</span>, <span class="dt">y =</span> <span class="st">''</span>, <span class="dt">title =</span> <span class="st">'Overall Value of Bitcoins Sold in EUR'</span>, </a>
<a class="sourceLine" id="cb5-7" title="7">       <span class="dt">subtitle =</span> <span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/paste">paste0</a></span>(<span class="kw">date_format</span>(<span class="st">'%B %d'</span>)(date_from), <span class="st">' - '</span>, <span class="kw">date_format</span>(<span class="st">'%B %d'</span>)(date_to), <span class="st">', '</span>, </a>
<a class="sourceLine" id="cb5-8" title="8">                         <span class="kw">date_format</span>(<span class="st">'%Y'</span>)(date_to))) <span class="op">+</span><span class="st"> </span></a>
<a class="sourceLine" id="cb5-9" title="9"><span class="st">  </span><span class="kw">scale_x_datetime</span>(<span class="dt">breaks =</span> <span class="st">"5 day"</span>, <span class="dt">labels =</span> <span class="kw">date_format</span>(<span class="st">"%d-%B"</span>), <span class="dt">minor_breaks =</span> <span class="st">"1 day"</span>) <span class="op">+</span><span class="st"> </span></a>
<a class="sourceLine" id="cb5-10" title="10"><span class="st">  </span><span class="kw">scale_color_continuous</span>(<span class="dt">low =</span> <span class="st">'royalblue'</span>, <span class="dt">high =</span> <span class="st">'olivedrab2'</span>) <span class="op">+</span><span class="st"> </span></a>
<a class="sourceLine" id="cb5-11" title="11"><span class="st">  </span><span class="kw">scale_y_continuous</span>(<span class="dt">labels =</span> eur) </a></code></pre></div>
<p><img src="my-vignette_files/figure-html/unnamed-chunk-5-1.png" width="672"></p>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">
      </div>

</div>


      <footer><div class="copyright">
  <p>Developed by Anna Barbayeva.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.3.0.</p>
</div>
      </footer>
</div>

  

  </body>
</html>
